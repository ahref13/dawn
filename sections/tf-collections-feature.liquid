{% comment %} TF • Collections Feature {% endcomment %}

{% assign col = section.settings.collection %}

<section class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 px-[20px] md:px-[30px] lg:px-[50px] gap-[15px] mb-5 md:gap-[20px] lg:gap-[40px] w-full py-8">

    {% comment %} Heading spans all columns {% endcomment %}
    {% if section.settings.heading != blank %}
        <h2 class="font-base text-center leading-normal mt-[40px] mb-5 col-span-2 md:col-span-4 lg:col-span-6 xl:col-span-8">
            {{ section.settings.heading }}
        </h2>
    {% endif %}

    {% comment %} Products Grid - 4 products {% endcomment %}
    {% if col != blank %}
        {% for product in col.products limit: 4 %}
            <div class="col-span-1 md:col-span-1 lg:col-span-1 xl:col-span-2">
                <a href="{{ product.url }}" class="block no-underline text-inherit">
                    {% if product.featured_image %}
                        {{ product.featured_image
                        | image_url: width: 1000
                        | image_tag:
                        class: 'w-full h-auto aspect-[3/4] object-cover bg-[#f4f4f4]',
                        loading: 'lazy',
                        sizes: '20vw',
                        widths: '320,480,640,800,1000' }}
                    {% else %}
                        <div class="w-full h-auto aspect-[3/4] bg-[#eee]"></div>
                    {% endif %}

                    <div class="mt-2">
                        <h3 class="text-[14px] leading-[1.3] my-1">{{ product.title }}</h3>
                        <div class="text-[10px] mt-1">
                            {{ product.price | money }}
                        </div>
                    </div>
                </a>
            </div>
        {% endfor %}
    {% endif %}

    {% comment %} View All Link spans all columns {% endcomment %}
    {% if section.settings.show_view_all and col != blank %}
        <div class="text-center col-span-2 md:col-span-4 lg:col-span-6 xl:col-span-8">
            <a class="font-small underline text-black" href="/collections/all-products">
                {{ section.settings.view_all_label }}
            </a>
        </div>
    {% endif %}

</section>

{% schema %}
{
  "name": "TF • Collections feature",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Shop Our Collections"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "label": "Show 'Shop All' link",
      "default": true
    },
    {
      "type": "text",
      "id": "view_all_label",
      "label": "View-all label",
      "default": "Shop All"
    }
  ],
  "presets": [
    {
      "name": "TF • Collections feature"
    }
  ]
}
{% endschema %}